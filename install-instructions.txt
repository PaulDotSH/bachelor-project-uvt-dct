#TODO: Find an easier way to install uuidv7
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
sudo apt update
sudo apt install build-essential pkg-config
sudo apt install postgresql postgresql-contrib
wget https://github.com/fboulnois/pg_uuidv7/releases/download/v1.5.0/pg_uuidv7.tar.gz
tar -xvf pg_uuidv7.tar.gz
sudo cp 14/pg_uuidv7.so /usr/lib/postgresql/14/lib/
sudo cp pg_uuidv7.control /usr/share/postgresql/14/extension/
sudo cp pg_uuidv7--1.5.sql /usr/share/postgresql/14/extension/
rm -rf 13 14 15 16 pg_uuidv7.control pg_uuidv7--1.5.sql pg_uuidv7.tar.gz
sudo systemctl restart postgresql


# Manual
sudo -i -u postgres
createdb dct
createuser --interactive
ALTER USER dct WITH PASSWORD 'yP5t63QvKjmfMgVd8BD9rwnLUbhTFRae4CJNzAsW2qYpu7XEkZ';
# Change peer to scram-sha-256 with sudo nano /etc/postgresql/14/main/pg_hba.conf
sudo systemctl restart postgresql
cd ~/dct
psql -d dct -U dct -f src/DB.sql
psql -d dct -U dct -f sample-data.sql # Only if needed
